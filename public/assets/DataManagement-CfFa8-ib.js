import{r as l,n as M,q as m,j as e,C as x,b as f,c as w,d as C,e as g,I as i,f as j,S as b,B as R}from"./index-C9s3gB-3.js";import{T as y}from"./textarea-vuvg6D2C.js";import{T as k,a as I,b as T,c as A}from"./tabs-CB9Ea3mT.js";import{U as F}from"./users-mCE-RU_j.js";import{M as B}from"./message-square-DIj-h5O8.js";import{P as E}from"./plus-CZPuL8hb.js";import{T as q}from"./trash-2-DPJkPHKI.js";import"./index-CmDifxQn.js";import"./index-vsrGE1fA.js";function J(){const[v,D]=l.useState([]),[N,P]=l.useState([]),[p,h]=l.useState(!1),{toast:r}=M(),[s,o]=l.useState({name:"",title:"",description:"",pricePerMinute:"",specialty:"",whatsapp:"",imageUrl:""}),[t,n]=l.useState({content:"",authorName:"",authorLocation:"",authorImageUrl:"",rating:5});l.useEffect(()=>{u()},[]);const u=async()=>{try{const[a,c]=await Promise.all([m("GET","/api/admin/consultants"),m("GET","/api/testimonials")]);if(a.ok){const d=await a.json();D(d)}if(c.ok){const d=await c.json();P(d)}}catch(a){console.error("Error fetching data:",a)}},L=async()=>{h(!0);try{if((await m("POST","/api/admin/consultants",{...s,pricePerMinute:parseFloat(s.pricePerMinute),isActive:!0,status:"approved"})).ok)r({title:"Consultor adicionado",description:"Novo consultor criado com sucesso"}),o({name:"",title:"",description:"",pricePerMinute:"",specialty:"",whatsapp:"",imageUrl:""}),u();else throw new Error("Falha ao adicionar consultor")}catch{r({title:"Erro",description:"Falha ao adicionar consultor",variant:"destructive"})}finally{h(!1)}},S=async()=>{h(!0);try{if((await m("POST","/api/admin/testimonials",t)).ok)r({title:"Depoimento adicionado",description:"Novo depoimento criado com sucesso"}),n({content:"",authorName:"",authorLocation:"",authorImageUrl:"",rating:5}),u();else throw new Error("Falha ao adicionar depoimento")}catch{r({title:"Erro",description:"Falha ao adicionar depoimento",variant:"destructive"})}finally{h(!1)}},U=async a=>{try{(await m("DELETE",`/api/admin/consultants/${a}`)).ok&&(r({title:"Consultor removido",description:"Consultor deletado com sucesso"}),u())}catch{r({title:"Erro",description:"Falha ao remover consultor",variant:"destructive"})}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Gerenciamento de Dados Reais"}),e.jsx("p",{className:"text-blue-200",children:"Administração de consultores e depoimentos baseados em dados autênticos do banco PostgreSQL"})]}),e.jsxs(k,{defaultValue:"consultants",className:"space-y-6",children:[e.jsxs(I,{className:"grid w-full grid-cols-2",children:[e.jsxs(T,{value:"consultants",className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-4 w-4"}),"Consultores (",v.length,")"]}),e.jsxs(T,{value:"testimonials",className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),"Depoimentos (",N.length,")"]})]}),e.jsxs(A,{value:"consultants",className:"space-y-6",children:[e.jsxs(x,{children:[e.jsxs(f,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5"}),"Adicionar Novo Consultor"]}),e.jsx(C,{children:"Adicione consultores reais ao banco de dados"})]}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(i,{placeholder:"Nome completo",value:s.name,onChange:a=>o({...s,name:a.target.value})}),e.jsx(i,{placeholder:"Título/Especialização",value:s.title,onChange:a=>o({...s,title:a.target.value})})]}),e.jsx(y,{placeholder:"Descrição detalhada do consultor",value:s.description,onChange:a=>o({...s,description:a.target.value})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsx(i,{type:"number",placeholder:"Preço por minuto",value:s.pricePerMinute,onChange:a=>o({...s,pricePerMinute:a.target.value})}),e.jsx(i,{placeholder:"Especialidade",value:s.specialty,onChange:a=>o({...s,specialty:a.target.value})}),e.jsx(i,{placeholder:"WhatsApp",value:s.whatsapp,onChange:a=>o({...s,whatsapp:a.target.value})})]}),e.jsx(i,{placeholder:"URL da imagem",value:s.imageUrl,onChange:a=>o({...s,imageUrl:a.target.value})}),e.jsx(j,{onClick:L,disabled:p,className:"w-full",children:p?"Adicionando...":"Adicionar Consultor"})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(a=>e.jsx(x,{children:e.jsxs(g,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600",children:a.title})]}),e.jsx(j,{size:"sm",variant:"destructive",onClick:()=>U(a.id),children:e.jsx(q,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm mb-3",children:a.description}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(b,{className:"h-4 w-4 text-yellow-500"}),e.jsxs("span",{className:"text-sm",children:[a.rating," (",a.reviewCount," avaliações)"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(R,{variant:a.isActive?"default":"secondary",children:a.isActive?"Ativo":"Inativo"}),e.jsxs("span",{className:"text-sm font-medium",children:["R$ ",a.pricePerMinute,"/min"]})]})]})},a.id))})]}),e.jsxs(A,{value:"testimonials",className:"space-y-6",children:[e.jsxs(x,{children:[e.jsxs(f,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5"}),"Adicionar Novo Depoimento"]}),e.jsx(C,{children:"Adicione depoimentos reais de clientes ao banco de dados"})]}),e.jsxs(g,{className:"space-y-4",children:[e.jsx(y,{placeholder:"Conteúdo do depoimento",value:t.content,onChange:a=>n({...t,content:a.target.value})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(i,{placeholder:"Nome do autor",value:t.authorName,onChange:a=>n({...t,authorName:a.target.value})}),e.jsx(i,{placeholder:"Localização",value:t.authorLocation,onChange:a=>n({...t,authorLocation:a.target.value})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(i,{placeholder:"URL da foto do autor",value:t.authorImageUrl,onChange:a=>n({...t,authorImageUrl:a.target.value})}),e.jsx(i,{type:"number",min:"1",max:"5",placeholder:"Avaliação (1-5)",value:t.rating,onChange:a=>n({...t,rating:parseInt(a.target.value)})})]}),e.jsx(j,{onClick:S,disabled:p,className:"w-full",children:p?"Adicionando...":"Adicionar Depoimento"})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:N.map(a=>e.jsx(x,{children:e.jsxs(g,{className:"p-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:[...Array(a.rating)].map((c,d)=>e.jsx(b,{className:"h-4 w-4 text-yellow-500 fill-current"},d))}),e.jsx("p",{className:"text-sm mb-3",children:a.content}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:a.authorName}),e.jsx("p",{className:"text-xs text-gray-600",children:a.authorLocation})]}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(a.createdAt).toLocaleDateString("pt-BR")})]})]})},a.id))})]})]})]})})}export{J as default};
