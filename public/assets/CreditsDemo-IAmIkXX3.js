import{r as i,n as C,j as s,C as o,b as d,c as l,d as p,e as c,B as j,I as v,S as y,f as w,q as g}from"./index-C9s3gB-3.js";import{C as P}from"./coins-C7_qvBIE.js";import{G as B}from"./gift-DwpQE1qQ.js";import{C as S}from"./credit-card-D0hcmZDe.js";function I(){const[e,b]=i.useState(null),[r,f]=i.useState("50"),[m,x]=i.useState(!1),[u]=i.useState("1"),{toast:n}=C(),h=async()=>{try{const a=await g("GET",`/api/credits/${u}`);if(a.ok){const t=await a.json();b(t)}}catch(a){console.error("Erro ao buscar cr√©ditos:",a)}};i.useEffect(()=>{h()},[]);const N=async()=>{x(!0);try{const a=await g("POST","/api/credits/purchase",{userId:u,amount:parseFloat(r),paymentMethod:"demo"});if(a.ok){const t=await a.json();n({title:"Compra realizada com sucesso!",description:t.bonusActivated?"Cr√©ditos adicionados + 10 minutos de b√¥nus ativados!":"Cr√©ditos adicionados √† sua conta"}),t.bonusActivated&&n({title:"üéÅ B√¥nus de Boas-vindas Ativado!",description:"Voc√™ ganhou 10 minutos gr√°tis para sua primeira consulta!"}),await h()}else{const t=await a.json();n({title:"Erro na compra",description:t.error,variant:"destructive"})}}catch{n({title:"Erro na compra",description:"Falha ao processar compra",variant:"destructive"})}finally{x(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Sistema de Cr√©ditos e B√¥nus"}),s.jsx("p",{className:"text-blue-200",children:"Demonstra√ß√£o do sistema baseado em CPF com b√¥nus para novos usu√°rios"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs(o,{children:[s.jsxs(d,{children:[s.jsxs(l,{className:"flex items-center gap-2",children:[s.jsx(P,{className:"h-5 w-5 text-yellow-500"}),"Seu Saldo"]}),s.jsx(p,{children:"Cr√©ditos dispon√≠veis para consultas"})]}),s.jsx(c,{children:e?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[s.jsx("span",{className:"font-medium",children:"Cr√©ditos Principais"}),s.jsxs("span",{className:"text-xl font-bold text-green-600",children:[e.totalCredits," min"]})]}),e.bonusCredits>0&&s.jsxs("div",{className:"flex justify-between items-center p-3 bg-orange-50 rounded-lg",children:[s.jsxs("span",{className:"font-medium flex items-center gap-2",children:[s.jsx(B,{className:"h-4 w-4 text-orange-500"}),"Cr√©ditos B√¥nus"]}),s.jsxs("span",{className:"text-xl font-bold text-orange-600",children:[e.bonusCredits," min"]})]}),s.jsx("div",{className:"pt-2 border-t",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-semibold",children:"Total Dispon√≠vel"}),s.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[e.totalCredits+e.bonusCredits," min"]})]})}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[!e.firstPurchaseCompleted&&s.jsx(j,{variant:"outline",className:"text-green-600 border-green-600",children:"Eleg√≠vel para B√¥nus de Boas-vindas"}),e.hasReceivedBonus&&s.jsx(j,{variant:"outline",className:"text-orange-600 border-orange-600",children:"B√¥nus Recebido"})]})]}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:"Carregando saldo..."})})]}),s.jsxs(o,{children:[s.jsxs(d,{children:[s.jsxs(l,{className:"flex items-center gap-2",children:[s.jsx(S,{className:"h-5 w-5 text-blue-500"}),"Comprar Cr√©ditos"]}),s.jsx(p,{children:"Adicione minutos √† sua conta"})]}),s.jsxs(c,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Quantidade (em minutos)"}),s.jsx(v,{type:"number",value:r,onChange:a=>f(a.target.value),min:"10",step:"10"})]}),e&&!e.firstPurchaseCompleted&&s.jsxs("div",{className:"p-4 bg-gradient-to-r from-orange-50 to-yellow-50 rounded-lg border border-orange-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(y,{className:"h-5 w-5 text-orange-500"}),s.jsx("span",{className:"font-semibold text-orange-800",children:"Oferta Especial de Boas-vindas!"})]}),s.jsxs("p",{className:"text-sm text-orange-700",children:["Esta √© sua primeira compra! Voc√™ ganhar√° ",s.jsx("strong",{children:"10 minutos gr√°tis"})," ap√≥s confirmar a compra."]})]}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Cr√©ditos:"}),s.jsxs("span",{children:[r," minutos"]})]}),e&&!e.firstPurchaseCompleted&&s.jsxs("div",{className:"flex justify-between text-orange-600 font-medium",children:[s.jsx("span",{children:"B√¥nus:"}),s.jsx("span",{children:"+10 minutos gr√°tis"})]}),s.jsxs("div",{className:"flex justify-between border-t pt-2 font-semibold",children:[s.jsx("span",{children:"Total:"}),s.jsxs("span",{children:[parseInt(r)+(e&&!e.firstPurchaseCompleted?10:0)," minutos"]})]})]}),s.jsx(w,{onClick:N,className:"w-full",disabled:m||!r,children:m?"Processando...":"Comprar Cr√©ditos"})]})]})]}),s.jsxs(o,{className:"mt-6",children:[s.jsx(d,{children:s.jsx(l,{children:"Sistema Baseado em CPF - Funcionalidades Implementadas"})}),s.jsxs(c,{children:[s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Cadastro com CPF"}),s.jsx("p",{className:"text-sm text-blue-600",children:"CPF como chave √∫nica previne cadastros duplicados"})]}),s.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"Email Obrigat√≥rio"}),s.jsx("p",{className:"text-sm text-green-600",children:"Valida√ß√£o de email √© obrigat√≥ria no cadastro"})]}),s.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-orange-800 mb-2",children:"B√¥nus Autom√°tico"}),s.jsx("p",{className:"text-sm text-orange-600",children:"10 minutos gr√°tis ativados na primeira compra"})]})]}),s.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"APIs Implementadas:"}),s.jsxs("ul",{className:"text-sm space-y-1 text-gray-600",children:[s.jsx("li",{children:"‚Ä¢ POST /api/auth/register - Cadastro com CPF"}),s.jsx("li",{children:"‚Ä¢ POST /api/auth/login - Login com email"}),s.jsx("li",{children:"‚Ä¢ POST /api/credits/purchase - Compra de cr√©ditos com b√¥nus"}),s.jsx("li",{children:"‚Ä¢ GET /api/credits/:userId - Consulta de saldo"}),s.jsx("li",{children:"‚Ä¢ WebSocket /ws - Chat em tempo real"})]})]})]})]})]})})}export{I as default};
