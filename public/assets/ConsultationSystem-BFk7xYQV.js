import{r,u as w,j as e,m as l,ad as T,a5 as E,p as u,E as I,o as M,S as O,ae as q,a as F,V as $,q as P}from"./index-C9s3gB-3.js";import{B as S}from"./bell-CDrkVoJb.js";import{U as f}from"./users-mCE-RU_j.js";import{C as b}from"./clock-CaGl1oH_.js";import{C as U}from"./circle-alert-BweEUIZq.js";import{C as A}from"./circle-check-big-AFLFqLX2.js";import{C as Q}from"./credit-card-D0hcmZDe.js";import{Z as D}from"./zap-BloW11p5.js";import{P as V}from"./phone-BFwiWRG9.js";function H(){const[c,x]=r.useState([]),[d,g]=r.useState(!1),[p,h]=r.useState(0),{data:i}=w({queryKey:["/api/consultation/stats"],refetchInterval:5e3});r.useEffect(()=>{if(i){const t=new Date().toLocaleTimeString(),a=[];i.onlineConsultants>0&&a.push({id:Date.now()+1,type:"success",title:"Consultores Online",message:`${i.onlineConsultants} especialistas disponíveis agora`,timestamp:t,isRead:!1,action:{text:"Ver Consultores",url:"/consultas-online"}}),i.activeConsultations>0&&a.push({id:Date.now()+2,type:"info",title:"Consultas Ativas",message:`${i.activeConsultations} sessões em andamento`,timestamp:t,isRead:!1}),i.queueLength>0&&a.push({id:Date.now()+3,type:"warning",title:"Fila de Espera",message:`${i.queueLength} pessoa(s) aguardando atendimento`,timestamp:t,isRead:!1}),x(o=>{const j=o.map(n=>n.type+n.title),N=[...a.filter(n=>!j.includes(n.type+n.title)),...o].slice(0,5);return h(N.filter(n=>!n.isRead).length),N})}},[i]);const v=t=>{x(a=>a.map(o=>o.id===t?{...o,isRead:!0}:o)),h(a=>Math.max(0,a-1))},m=()=>{x(t=>t.map(a=>({...a,isRead:!0}))),h(0)},y=t=>{switch(t){case"success":return e.jsx(A,{className:"w-5 h-5 text-green-500"});case"warning":return e.jsx(U,{className:"w-5 h-5 text-orange-500"});default:return e.jsx(u,{className:"w-5 h-5 text-blue-500"})}};return e.jsxs("div",{className:"fixed top-4 right-4 z-50",children:[e.jsxs(l.button,{onClick:()=>g(!d),className:"relative bg-white p-3 rounded-full shadow-lg border-2 border-purple-100 hover:border-purple-300 transition-all duration-300",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(S,{className:"w-6 h-6 text-purple-600"}),p>0&&e.jsx(l.div,{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:300},children:p})]}),e.jsx(T,{children:d&&e.jsxs(l.div,{className:"absolute top-16 right-0 w-96 bg-white rounded-xl shadow-2xl border border-gray-200 overflow-hidden",initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},transition:{duration:.2},children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Notificações"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[p>0&&e.jsx("button",{onClick:m,className:"text-sm bg-white/20 px-3 py-1 rounded-full hover:bg-white/30 transition-colors",children:"Marcar todas como lidas"}),e.jsx("button",{onClick:()=>g(!1),className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(E,{className:"w-5 h-5"})})]})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:c.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(S,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"Nenhuma notificação no momento"})]}):c.map(t=>e.jsx(l.div,{className:`p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors cursor-pointer ${t.isRead?"":"bg-purple-50"}`,onClick:()=>v(t.id),initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:y(t.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 truncate",children:t.title}),!t.isRead&&e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.message}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:t.timestamp}),t.action&&e.jsx("a",{href:t.action.url,className:"text-xs text-purple-600 hover:text-purple-800 font-medium",onClick:a=>a.stopPropagation(),children:t.action.text})]})]})]})},t.id))}),i&&e.jsx("div",{className:"bg-gray-50 p-4 border-t",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx(f,{className:"w-4 h-4 text-green-500 mx-auto mb-1"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:i.onlineConsultants}),e.jsx("div",{className:"text-xs text-gray-500",children:"Online"})]}),e.jsxs("div",{children:[e.jsx(u,{className:"w-4 h-4 text-blue-500 mx-auto mb-1"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:i.activeConsultations}),e.jsx("div",{className:"text-xs text-gray-500",children:"Ativas"})]}),e.jsxs("div",{children:[e.jsx(b,{className:"w-4 h-4 text-orange-500 mx-auto mb-1"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:i.queueLength}),e.jsx("div",{className:"text-xs text-gray-500",children:"Na Fila"})]})]})})]})})]})}function G(){const[c,x]=r.useState("tarot"),[d,g]=r.useState("chat"),[p,h]=r.useState(!1),[i,v]=r.useState(0),[m,y]=r.useState(5);I(),w({queryKey:["/api/consultation/real-consultants",c],refetchInterval:5e3});const{data:t}=w({queryKey:["/api/consultation/stats"],refetchInterval:3e3}),a=M({mutationFn:async s=>(await P("POST","/api/consultation/real-queue",s)).json(),onSuccess:s=>{h(!0),v(s.position)}}),o=M({mutationFn:async s=>(await P("POST","/api/consultation/whatsapp",s)).json(),onSuccess:s=>{window.open(s.whatsappUrl,"_blank")}}),j=[{id:1,name:"Consultor Especialista",specialty:"Tarot e Amor",rating:4.9,pricePerMinute:3.5,isOnline:!0,responseTime:"< 30s",totalConsultations:1520,imageUrl:"https://images.unsplash.com/photo-1494790108755-2616b612b5bc?w=150",whatsappNumber:"+5511999887766",availableMethods:["chat","video","audio","whatsapp"]},{id:2,name:"João Vidente",specialty:"Astrologia",rating:4.8,pricePerMinute:4,isOnline:!0,responseTime:"< 1min",totalConsultations:890,imageUrl:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150",whatsappNumber:"+5511888776655",availableMethods:["chat","video","whatsapp"]},{id:3,name:"Ana Espiritual",specialty:"Mediunidade",rating:4.7,pricePerMinute:4.5,isOnline:!0,responseTime:"< 45s",totalConsultations:675,imageUrl:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150",whatsappNumber:"+5511777665544",availableMethods:["chat","video","audio","whatsapp"]}],C=[{id:"tarot",name:"Tarot",icon:"🔮",color:"purple"},{id:"astrologia",name:"Astrologia",icon:"⭐",color:"blue"},{id:"mediunidade",name:"Mediunidade",icon:"🌟",color:"pink"},{id:"numerologia",name:"Numerologia",icon:"🔢",color:"green"}],N=[{id:"chat",name:"Chat",icon:u,description:"Conversa por texto"},{id:"video",name:"Vídeo",icon:$,description:"Chamada de vídeo"},{id:"audio",name:"Áudio",icon:V,description:"Chamada de voz"},{id:"whatsapp",name:"WhatsApp",icon:u,description:"Conversa pelo WhatsApp",color:"green"}],n=()=>{a.mutate({clientId:"test-client-1",serviceType:c,communicationMethod:d,maxPricePerMinute:m})},k=s=>{d==="whatsapp"&&s.whatsappNumber?o.mutate({clientId:"cliente-demo-1",consultantId:s.id,serviceType:c,whatsappNumber:s.whatsappNumber,pricePerMinute:s.pricePerMinute}):console.log(`Iniciando consulta ${d} com:`,s.name)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-blue-50",children:[e.jsx(H,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs(l.div,{className:"text-center mb-12",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-primary mb-4",children:["Consultas ",e.jsx("span",{className:"text-accent",children:"Espirituais Online"})]}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Conecte-se instantaneamente com nossos consultores especializados. Sistema de fila inteligente e consultas em tempo real."})]}),e.jsxs(l.div,{className:"mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Escolha seu Serviço"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto",children:C.map(s=>e.jsxs(l.button,{onClick:()=>x(s.id),className:`p-4 rounded-xl border-2 transition-all duration-300 ${c===s.id?"border-primary bg-primary text-white":"border-gray-200 bg-white hover:border-primary hover:shadow-lg"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("div",{className:"text-3xl mb-2",children:s.icon}),e.jsx("div",{className:"font-semibold",children:s.name})]},s.id))})]}),e.jsxs(l.div,{className:"mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Como Deseja se Conectar?"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto",children:N.map(s=>e.jsxs(l.button,{onClick:()=>g(s.id),className:`p-6 rounded-xl border-2 transition-all duration-300 ${d===s.id?s.id==="whatsapp"?"border-green-500 bg-green-500 text-white":"border-primary bg-primary text-white":s.id==="whatsapp"?"border-gray-200 bg-white hover:border-green-500 hover:shadow-lg":"border-gray-200 bg-white hover:border-primary hover:shadow-lg"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:[s.id==="whatsapp"?e.jsx("div",{className:"text-3xl mb-3",children:"💬"}):e.jsx(s.icon,{className:"w-8 h-8 mx-auto mb-3"}),e.jsx("div",{className:"font-semibold text-lg mb-1",children:s.name}),e.jsx("div",{className:"text-sm opacity-75",children:s.description})]},s.id))})]}),e.jsx(l.div,{className:"mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:e.jsxs("div",{className:"max-w-md mx-auto bg-white p-6 rounded-xl shadow-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-center",children:"Preço Máximo por Minuto"}),e.jsx("div",{className:"text-center mb-4",children:e.jsxs("span",{className:"text-3xl font-bold text-primary",children:["R$ ",m.toFixed(2)]})}),e.jsx("input",{type:"range",min:"1",max:"10",step:"0.50",value:m,onChange:s=>y(parseFloat(s.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mt-2",children:[e.jsx("span",{children:"R$ 1,00"}),e.jsx("span",{children:"R$ 10,00"})]})]})}),e.jsxs(l.div,{className:"mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[e.jsxs("h2",{className:"text-2xl font-bold text-center mb-6",children:["Consultores Online Agora",e.jsxs("span",{className:"ml-2 inline-flex items-center px-3 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"}),j.length," disponíveis"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto",children:j.filter(s=>s.pricePerMinute<=m).map(s=>e.jsx(l.div,{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300",whileHover:{y:-5},layout:!0,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-16 h-16 rounded-full object-cover mr-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold",children:s.name}),e.jsx("p",{className:"text-gray-600 text-sm",children:s.specialty}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(O,{className:"w-4 h-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-sm text-gray-600 ml-1",children:s.rating}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",s.totalConsultations," consultas)"]})]})]}),e.jsxs("div",{className:"flex items-center text-green-600 text-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-1 animate-pulse"}),"Online"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[e.jsx(b,{className:"w-5 h-5 text-purple-600 mx-auto mb-1"}),e.jsx("div",{className:"text-sm font-semibold",children:s.responseTime}),e.jsx("div",{className:"text-xs text-gray-500",children:"Resposta"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx(Q,{className:"w-5 h-5 text-green-600 mx-auto mb-1"}),e.jsxs("div",{className:"text-sm font-semibold",children:["R$ ",s.pricePerMinute.toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Por minuto"})]})]}),e.jsxs("button",{onClick:()=>k(s),className:"w-full bg-gradient-to-r from-primary to-accent text-white font-semibold py-3 px-4 rounded-lg hover:shadow-lg transition-all duration-300 flex items-center justify-center",children:[e.jsx(D,{className:"w-5 h-5 mr-2"}),"Consultar Agora"]})]})},s.id))})]}),e.jsx(l.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},children:p?e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg max-w-md mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx(A,{className:"w-8 h-8 text-green-500 mr-3"}),e.jsx("span",{className:"text-lg font-semibold",children:"Na Fila de Espera"})]}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["Você está na posição ",e.jsxs("span",{className:"font-bold text-primary",children:["#",i]})]}),e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(b,{className:"w-5 h-5 text-gray-500 mr-2"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Tempo estimado: ",i*5," minutos"]})]})]}):e.jsxs("button",{onClick:n,disabled:a.isPending,className:"bg-gradient-to-r from-accent to-primary text-white font-semibold py-4 px-8 rounded-full text-lg hover:shadow-xl transition-all duration-300 disabled:opacity-50 flex items-center mx-auto",children:[e.jsx(f,{className:"w-6 h-6 mr-3"}),a.isPending?"Entrando na Fila...":"Entrar na Fila de Espera",e.jsx(q,{className:"w-6 h-6 ml-3"})]})}),e.jsxs(l.div,{className:"mt-16 grid grid-cols-2 md:grid-cols-4 gap-6 max-w-4xl mx-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:[e.jsxs("div",{className:"text-center bg-white p-6 rounded-xl shadow-lg",children:[e.jsx(f,{className:"w-8 h-8 text-primary mx-auto mb-3"}),e.jsx("div",{className:"text-2xl font-bold text-primary",children:(t==null?void 0:t.onlineConsultants)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Online Agora"}),e.jsxs("div",{className:"text-xs text-green-500 mt-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full inline-block mr-1 animate-pulse"}),"Ao vivo"]})]}),e.jsxs("div",{className:"text-center bg-white p-6 rounded-xl shadow-lg",children:[e.jsx(F,{className:"w-8 h-8 text-accent mx-auto mb-3"}),e.jsx("div",{className:"text-2xl font-bold text-accent",children:(t==null?void 0:t.todayConsultations)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Consultas Hoje"}),e.jsx("div",{className:"text-xs text-blue-500 mt-1",children:"Atualizado agora"})]}),e.jsxs("div",{className:"text-center bg-white p-6 rounded-xl shadow-lg",children:[e.jsx(u,{className:"w-8 h-8 text-purple-500 mx-auto mb-3"}),e.jsx("div",{className:"text-2xl font-bold text-purple-500",children:(t==null?void 0:t.activeConsultations)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Consultas Ativas"}),e.jsx("div",{className:"text-xs text-purple-500 mt-1",children:"Em andamento"})]}),e.jsxs("div",{className:"text-center bg-white p-6 rounded-xl shadow-lg",children:[e.jsx(b,{className:"w-8 h-8 text-orange-500 mx-auto mb-3"}),e.jsx("div",{className:"text-2xl font-bold text-orange-500",children:(t==null?void 0:t.queueLength)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Na Fila"}),e.jsx("div",{className:"text-xs text-orange-500 mt-1",children:"Aguardando"})]})]})]})]})}export{G as default};
